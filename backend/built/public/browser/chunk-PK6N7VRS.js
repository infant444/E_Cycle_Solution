import{a as u,b,l as g}from"./chunk-FCENJK4V.js";import{d as m}from"./chunk-DNW7DQGQ.js";import{r as n}from"./chunk-GBLLTKEA.js";import{Q as c,U as l,Y as s,l as a,ua as p}from"./chunk-OQFJ3SRP.js";var r=class{id;name;email;password;dob;contact;role;is_login;token};var i="user";var S=class o{constructor(t,e,v){this.http=t;this.toasterService=e;this.platformId=v;if(this.userSubject=new a(new r),this.userObservable=this.userSubject.asObservable(),n(this.platformId)){let f=this.getUserLocalStorage();this.userSubject.next(f)}}userSubject=new a(new r);userObservable;login(t){return this.http.post(u,t).pipe(c({next:e=>{console.log(e),this.userSubject.next(e),this.toasterService.success("Welcome back to E cycle Solution"),console.log(e.token),this.setUserToLocalStorage(e),console.log(this.userSubject.value)},error:e=>{this.toasterService.error(e.error.message,"Login Fails")}}))}getAll(){return this.http.get(b)}logout(){this.userSubject.next(new r),localStorage.removeItem(i),window.location.reload()}setUserToLocalStorage(t){localStorage.setItem(i,JSON.stringify(t))}getUserLocalStorage(){if(n(this.platformId)){let t=localStorage.getItem(i);return t?JSON.parse(t):new r}else return new r}get currentUser(){return this.userSubject?.value}static \u0275fac=function(e){return new(e||o)(s(m),s(g),s(p))};static \u0275prov=l({token:o,factory:o.\u0275fac,providedIn:"root"})};export{S as a};
